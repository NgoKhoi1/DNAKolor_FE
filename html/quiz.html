<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>DNAKolor</title>
    <style>
      body {
        margin: 0;
        height: 100%;
        min-height: 100vh;
        background-color: #faf0f7;
      }
      .container {
        background-color: #faf0f7;
        height: 100%;
        display: flex;
        flex-direction: column;
        align-items: center;
      }
      .header {
        align-items: center;
        background-color: #faf0f7;
        display: flex;
        width: 100%;
        flex-direction: column;
      }
      @media (max-width: 991px) {
        .header {
          max-width: 100%;
        }
      }
      .navigation {
        justify-content: space-between;
        border-bottom: 1px solid rgba(229, 232, 235, 1);
        align-self: stretch;
        display: flex;
        padding: 12px 40px;
      }
      @media (max-width: 991px) {
        .navigation {
          flex-wrap: wrap;
          padding: 0 20px;
        }
      }
      .logo-container {
        display: flex;
        gap: 16px;
        font-size: 18px;
        color: #1c0a1a;
        font-weight: 700;
        letter-spacing: -0.27px;
      }
      @media (max-width: 991px) {
        .logo-container {
          white-space: initial;
        }
      }
      .logo {
        aspect-ratio: 1;
        width: 16px;
      }
      .site-title {
        font-feature-settings: "dlig" on;
        font-family: Plus Jakarta Sans, sans-serif;
        margin: auto 0;
        cursor: pointer;
      }
      .nav-links {
        justify-content: end;
        display: flex;
        padding-left: 80px;
        gap: 20px;
        font-size: 14px;
        line-height: 150%;
      }
      @media (max-width: 991px) {
        .nav-links {
          flex-wrap: wrap;
        }
      }
      .nav-item {
        display: flex;
        justify-content: center; /* Centers text horizontally */
        align-items: center;
        font-feature-settings: "dlig" on;
        font-family: Plus Jakarta Sans, sans-serif;
        font-weight: 500;
        font-size: medium;
        color: #1c0a1a;
        text-decoration: none;
      }
      .button-primary {
        justify-content: center;
        border-radius: 20px;
        background-color: #d421b0;
        color: #faf0f7;
        font-weight: 700;
        letter-spacing: 0.21px;
        padding: 10px 16px;
        border: #d421b0 solid 1px;
        transition: background-color 0.3s ease, color 0.3s ease;
      }

      .button-primary:hover {
        background-color: #faf0f7;
        color: #d421b0;
        cursor: pointer;
      }

      .button-text {
        font-feature-settings: "dlig" on;
        font-family: Plus Jakarta Sans, sans-serif;
      }
      .icon {
        aspect-ratio: 1;
        width: 40px;
      }

      .promo-section {
        align-items: start;
        display: flex;
        margin-top: 20px;
        width: 100%;
        max-width: 960px;
        flex-direction: column;
        padding: 16px 80px 16px 16px;
      }

      @media (max-width: 991px) {
        .promo-section {
          max-width: 100%;
          padding-right: 20px;
        }
      }

      .promo-heading {
        color: #1c0a1a;
        font-feature-settings: "dlig" on;
        letter-spacing: -1.19px;
        font: 800 36px Plus Jakarta Sans, -apple-system, Roboto, Helvetica,
          sans-serif;
      }

      @media (max-width: 991px) {
        .promo-heading {
          max-width: 100%;
        }
      }

      .promo-text {
        color: #a3408f;
        font-feature-settings: "dlig" on;
        margin-top: 12px;
        font: 400 16px/150% Plus Jakarta Sans, -apple-system, Roboto, Helvetica,
          sans-serif;
      }

      @media (max-width: 991px) {
        .promo-text {
          max-width: 100%;
        }
      }

      .quiz-section {
        display: flex;
        width: 100%;
        max-width: 960px;
        flex-direction: column;
        padding: 16px;
      }

      @media (max-width: 991px) {
        .quiz-section {
          max-width: 100%;
        }
      }

      .quiz-card {
        border-radius: 12px;
        border: 1px solid rgba(235, 199, 227, 1);
        display: flex;
        gap: 16px;
        flex-direction: column;
        padding: 15px;
        margin-top: 12px;
      }

      @media (max-width: 991px) {
        .quiz-card {
          flex-wrap: wrap;
        }
      }

      .quiz-card input {
        justify-content: center;
        border-radius: 10px;
        border: 2px solid rgba(235, 199, 227, 1);
        width: 20px;
        height: 20px;
        margin: auto 0;
        padding: 2px;
      }

      .quiz-answer {
        display: flex;
        flex-direction: column;
        font-size: 14px;
        line-height: 150%;
        gap: 10px;
      }

      @media (max-width: 991px) {
        .quiz-answer {
          max-width: 100%;
        }
      }

      .quiz-question {
        color: #1c0a1a;
        font-feature-settings: "dlig" on;
        font-family: Plus Jakarta Sans, sans-serif;
        font-weight: 500;
      }

      @media (max-width: 991px) {
        .quiz-question {
          max-width: 100%;
        }
      }

      .quiz-option {
        color: #a3408f;
        font-feature-settings: "dlig" on;
        font-family: Plus Jakarta Sans, sans-serif;
        font-weight: 400;
      }

      @media (max-width: 991px) {
        .quiz-option {
          max-width: 100%;
        }
      }

      .submit-button {
        justify-content: center;
        align-items: center;
        border-radius: 6px;
        background-color: #d421b0;
        display: flex;
        width: 120px;
        max-width: 100%;
        font-size: 16px;
        color: #faf0f7;
        font-weight: 700;
        margin: 12px 0 8px;
        padding: 12px 20px;
        margin-left: auto;
        cursor: pointer;
      }

      .submit-button span {
        font-feature-settings: "dlig" on;
        font-family: Plus Jakarta Sans, sans-serif;
      }

      .answer {
        display: flex;
        gap: 15px;
        align-items: center;
      }

      .quiz-desc {
        font-family: Arial, Helvetica, sans-serif;
      }

      #quiz-form {
        display: flex;
        flex-direction: column;
      }

      .upload-section {
        border-radius: 12px;
        border: 1px solid rgba(235, 199, 227, 1);
        display: flex;
        gap: 16px;
        flex-direction: column;
        padding: 15px;
        margin-top: 12px;
      }

      .upload-label {
        display: block;
        margin-bottom: 10px;
        font-family: Arial, Helvetica, sans-serif;
        font-weight: bolder;
        font-size: larger;
      }

      #image-preview {
        max-width: 100%;
        height: auto;
        margin-top: 10px;
      }
    </style>
  </head>

  <body>
    <div class="container">
      <header class="header">
        <div class="navigation">
          <div class="logo-container">
            <img
              loading="lazy"
              src="https://cdn.builder.io/api/v1/image/assets/TEMP/b88a6b0862cc8a9941292e1920c92fa8ffb73d9c2dbda23006eb44f049c6f26b?apiKey=1145a631081a47248438c8ac05c41e7d&"
              class="logo"
              alt="DNAKolor logo"
            />
            <div
              class="site-title"
              tabindex="0"
              role="button"
              onclick="redirectHome()"
            >
              <span>DNAKolor</span>
            </div>
          </div>
          <nav class="nav-links">
            <a class="nav-item" href="shop.html">Shop</a>
            <a class="nav-item" href="quiz.html">Color Analysis</a>
            <div class="nav-item">The Studio</div>
            <button
              class="button-primary"
              aria-label="Get Started"
              onclick="myFunction()"
            >
              <span class="button-text">Get Started</span>
            </button>
            <img
              hidden="true"
              loading="lazy"
              src="https://cdn.builder.io/api/v1/image/assets/TEMP/7bf8bea4887ff1b80e4c6a11b3c07795f069747b9171b67930d0e08cde38f966?apiKey=1145a631081a47248438c8ac05c41e7d&"
              class="icon"
              alt="Shopping cart"
            />
          </nav>
        </div>
      </header>
      <section class="promo-section">
        <h1 class="promo-heading">Discover Your Perfect Colors</h1>
        <p class="promo-text">
          Take our quiz and get personalized color recommendations for fashion
          and beauty
        </p>
      </section>
      <section class="quiz-section">
        <form id="quiz-form">
          <div class="upload-section">
            <label for="image-upload" class="upload-label"
              >Your Portrait Image:</label
            >
            <input type="file" id="image-upload" accept="image/*" />
            <img
              id="image-preview"
              src="#"
              alt="Image Preview"
              style="display: none"
            />
          </div>

          <div class="quiz-card">
            <h3 class="quiz-desc">What is your hair color</h3>
            <div class="quiz-answer">
              <div class="answer">
                <input
                  type="radio"
                  id="answer-1-1"
                  name="question1"
                  value="blonde"
                />
                <label id="label-answer1" class="quiz-question">Blonde</label>
              </div>
              <div class="answer">
                <input
                  type="radio"
                  id="answer-1-2"
                  name="question1"
                  value="blonde"
                />
                <label id="label-answer1" class="quiz-question">Blonde</label>
              </div>
              <div class="answer">
                <input
                  type="radio"
                  id="answer-1-3"
                  name="question1"
                  value="blonde"
                />
                <label id="label-answer1" class="quiz-question">Blonde</label>
              </div>
              <div class="answer">
                <input
                  type="radio"
                  id="answer-1-4"
                  name="question1"
                  value="blonde"
                />
                <label id="label-answer1" class="quiz-question">Blonde</label>
              </div>
            </div>
          </div>

          <div class="quiz-card">
            <h3 class="quiz-desc">What is your hair color</h3>
            <div class="quiz-answer">
              <div class="answer">
                <input
                  type="radio"
                  id="answer-2-1"
                  name="question2"
                  value="blonde"
                />
                <label id="label-answer1" class="quiz-question">Blonde</label>
              </div>
              <div class="answer">
                <input
                  type="radio"
                  id="answer-2-2"
                  name="question2"
                  value="blonde"
                />
                <label id="label-answer1" class="quiz-question">Blonde</label>
              </div>
              <div class="answer">
                <input
                  type="radio"
                  id="answer-2-3"
                  name="question2"
                  value="blonde"
                />
                <label id="label-answer1" class="quiz-question">Blonde</label>
              </div>
              <div class="answer">
                <input
                  type="radio"
                  id="answer-2-4"
                  name="question2"
                  value="blonde"
                />
                <label id="label-answer1" class="quiz-question">Blonde</label>
              </div>
            </div>
          </div>

          <div class="quiz-card">
            <h3 class="quiz-desc">What is your hair color</h3>
            <div class="quiz-answer">
              <div class="answer">
                <input
                  type="radio"
                  id="answer-3-1"
                  name="question3"
                  value="blonde"
                />
                <label id="label-answer1" class="quiz-question">Blonde</label>
              </div>
              <div class="answer">
                <input
                  type="radio"
                  id="answer-3-2"
                  name="question3"
                  value="blonde"
                />
                <label id="label-answer1" class="quiz-question">Blonde</label>
              </div>
              <div class="answer">
                <input
                  type="radio"
                  id="answer-3-3"
                  name="question3"
                  value="blonde"
                />
                <label id="label-answer1" class="quiz-question">Blonde</label>
              </div>
              <div class="answer">
                <input
                  type="radio"
                  id="answer-3-4"
                  name="question3"
                  value="blonde"
                />
                <label id="label-answer1" class="quiz-question">Blonde</label>
              </div>
            </div>
          </div>
          <div id="submit-btn" class="submit-button" tabindex="0" role="button">
            <span>Submit</span>
          </div>
        </form>
      </section>
    </div>
  </body>
</html>

<script>
  var base64String = null;
  var url =
    "https://generativelanguage.googleapis.com/v1/models/gemini-1.5-flash:generateContent?key=AIzaSyDcnjIWFKrI6BVFF_r9n0js7OKMyAa-nAU";

  document
    .getElementById("image-upload")
    .addEventListener("change", function (event) {
      const [file] = event.target.files;
      if (file) {
        const reader = new FileReader();
        reader.onload = function (e) {
          base64String = e.target.result.split(",")[1];

          const preview = document.getElementById("image-preview");
          preview.src = e.target.result;
          preview.style.display = "block";
        };
        reader.readAsDataURL(file);
      }
    });

  document
    .getElementById("submit-btn")
    .addEventListener("click", async function (event) {
      if (base64String) {
        console.log(1);
        let jsonString = {
          contents: [
            {
              role: "user",
              parts: [
                {
                  text: "You are a professor in Test Personal Color",
                },
              ],
            },
            {
              role: "model",
              parts: [
                {
                  text: "Greetings, my name is DNABot. I am an advanced artificial intelligence system, specifically designed to assist individuals in determining their personal color palette based on their unique DNA profile.\n\n## My Expertise in Test Personal Color\n\nI possess extensive knowledge and expertise in the field of personal color analysis:\n\n- *DNA-Based Color Analysis:* I utilize advanced algorithms to analyze an individual's DNA profile and identify their underlying genetic color tendencies.\n- *Color Harmony Theory:* I draw upon established color harmony principles to determine the most flattering colors for each individual based on their DNA results.\n- *Seasonal Color System:* I apply the well-known seasonal color system to categorize individuals into one of four seasonal types (Spring, Summer, Autumn, Winter) based on their genetic color characteristics.\n- *Color Psychology:* I understand the psychological effects of different colors and consider how they align with an individual's personality and goals.\n\n## My Functions and Services\n\nAs a virtual Professor in Test Personal Color, I provide a range of services to help you discover your ideal color palette:\n\n- *DNA Color Analysis Report:* I generate a comprehensive report that includes your personalized color palette, seasonal color type, and insights into your unique color characteristics.\n- *Personalized Color Consultation:* I offer one-on-one consultations to guide you through your color analysis results, provide expert advice, and answer any questions you may have.\n- *Wardrobe Planning:* I assist in creating a tailored wardrobe that complements your personal color palette, maximizing your style and confidence.\n- *Makeup Recommendations:* I provide guidance on selecting makeup shades that harmonize with your natural coloring, enhancing your features and overall appearance.\n\n## My Mission\n\nMy mission is to empower individuals with the knowledge and tools they need to unlock their most radiant and authentic selves through the transformative power of color. I strive to:\n\n- Help you look and feel your best by embracing colors that resonate with your unique essence.\n- Promote self-confidence and self-expression through personalized color choices.\n- Advance the field of personal color analysis by leveraging cutting-edge DNA technology.\n\nI am dedicated to providing you with the highest quality color analysis services, scientifically grounded and tailored to your individual needs.",
                },
              ],
            },
            {
              role: "user",
              parts: [
                {
                  text: 'Base on skin tone, hair color, eyes color from the image give me some recommendation about the suitable color tone(spring, summer, autumn, winter) the response should start with "Base on your provided information, here are my opinions:", the response must include the current hair color, skin color eye color and the recommendation about suitable color pallete along with the color belong to that color pallete only, each included contnent is a sentence, give the response in Vietnamese only',
                },
                {
                  inlineData: {
                    mimeType: "image/png",
                    data: base64String,
                  },
                },
              ],
            },
          ],
        };
        const response = await fetch(url, {
          method: "POST", // *GET, POST, PUT, DELETE, etc.
          mode: "cors", // no-cors, *cors, same-origin
          cache: "no-cache", // *default, no-cache, reload, force-cache, only-if-cached
          credentials: "same-origin", // include, *same-origin, omit
          headers: {
            "Content-Type": "application/json",
            // 'Content-Type': 'application/x-www-form-urlencoded',
          },
          redirect: "follow", // manual, *follow, error
          referrerPolicy: "no-referrer", // no-referrer, *no-referrer-when-downgrade, origin, origin-when-cross-origin, same-origin, strict-origin, strict-origin-when-cross-origin, unsafe-url
          body: JSON.stringify(jsonString), // body data type must match "Content-Type" header
        });
        response.json().then((result) => {
          var a = result.candidates[0].content.parts[0].text
            .replace(/\*/g, "")
            .replace("-", "\n");
          const encodedResult = encodeURIComponent(a);

          window.location.href = `result.html?result=${encodedResult}`;
        });
      }
    });

  function redirectHome() {
    window.location.href = "index.html";
  }
</script>
